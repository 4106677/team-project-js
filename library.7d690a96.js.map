{"mappings":"gfAEA,IAAAA,EAAAC,EAAA,S,yCCSAC,EAXuB,CACrBC,OAAQ,0CACRC,WAAY,kCACZC,YACE,yEACFC,UAAW,kBACXC,cAAe,8BACfC,kBAAmB,aACnBC,MAAO,2C,uCDGTC,EAAAC,iBAAiBC,uBAEjB,IAAMC,EAAiBC,SAASC,cAAc,wBACxCC,EAAkBF,SAASC,cAAc,YACzCE,EAAgBH,SAASC,cAAc,UAE7CC,EAAgBE,iBAAiB,UAuBjC,WACEC,EAAiBC,EAAQ,U,IAvB3BH,EAAcC,iBAAiB,UA2B/B,WACEC,EAAiBC,EAAQ,Q,IAzBL,IAAlBA,EAASC,aAAaC,QAAQ,OA6BT,SAAhBH,EAAiBI,EAAKC,GAC7B,IAAMC,GAAM,EAAAC,EAAAC,eAAczB,GACpB0B,GAAW,EAAAC,EAAAC,aAAYL,GAEvBM,GAAkB,EAAAF,EAAAG,QAAM,EAAAH,EAAAI,KAAIL,EAAU,SAAWL,EAAM,IAAMC,KAEnE,EAAAK,EAAAK,SAAQH,GAAiB,SAAAI,GACvB,IAAMC,EAAOC,OAAOC,OAAOH,EAASI,OAEpC1B,EAAe2B,WAAY,EAAAC,EAAAC,SAAgBN,E,IAlC3Cf,aAAaC,QAAQ,SACvB,EAAAtB,EAAA2C,uBAAsBvB,GAGpBA,EACFD,EAAiBC,EAAQ,WAEzBP,EAAe2B,UAAY,yCAKG,EAAhCI,EAAAF,U","sources":["src/library.js","src/js/apps/fireBaseConfig.js"],"sourcesContent":["// import watchedFilms from './js/watchedFilms';\n// import queueFilms from './js/queueFilms';\nimport { setDataToLocalStorage } from './js/apps/dataBaseApi';\nimport { openLoginModal } from './js/modal-of-login';\nimport { teamModalService } from './js/team-modal-service';\nimport { initializeApp } from 'firebase/app';\nimport firebaseConfig from './js/apps/fireBaseConfig';\nimport { getDatabase, ref, set, query, onValue } from 'firebase/database';\nimport oneMovieCardTmp from './templates/oneMovieCard.hbs';\nimport modalDetailMovie from './js/modal-detail-movie';\n\nteamModalService.eventListenerCreator();\n\nconst listSectionRef = document.querySelector('.movies-popular-list');\nconst inputWatchedRef = document.querySelector('#watched');\nconst inputQueueRef = document.querySelector('#queue');\n\ninputWatchedRef.addEventListener('change', onWatchedInput);\ninputQueueRef.addEventListener('change', onQueueInput);\n\n// ============ первая загрузка страницы =================================\nlet userid = localStorage.getItem('uid');\n\n// загрузка очередей фильмов в LocalStorage из DB\n\nif (localStorage.getItem('uid')) {\n  setDataToLocalStorage(userid);\n}\n\nif (userid) {\n  readFromDataBase(userid, 'watched');\n} else {\n  listSectionRef.innerHTML = '<p> В списке пока еще нет фильмов</p>';\n}\n// =========================================================================\n\n// Модалка с подробный описанием  фильма\nmodalDetailMovie();\n\n// Press Watched button\nfunction onWatchedInput() {\n  readFromDataBase(userid, 'watched');\n}\n\n// Press Queue button\nfunction onQueueInput() {\n  readFromDataBase(userid, 'queue');\n}\n\n// Функция чтение из базы данных\nfunction readFromDataBase(uid, target) {\n  const app = initializeApp(firebaseConfig);\n  const database = getDatabase(app);\n\n  const topUserPostsRef = query(ref(database, 'films/' + uid + '/' + target));\n\n  onValue(topUserPostsRef, snapshot => {\n    const data = Object.values(snapshot.val());\n\n    listSectionRef.innerHTML = oneMovieCardTmp(data);\n  });\n}\n\n// Открытие модального окна входа и регистрации пользователя\n// openLoginModal();\n\n","const firebaseConfig = {\n  apiKey: 'AIzaSyD8Xe_Nj5r_CTsQ1IiUWTLdW_hWsbx85Eg',\n  authDomain: 'filmoteka-6051d.firebaseapp.com',\n  databaseURL:\n    'https://filmoteka-6051d-default-rtdb.europe-west1.firebasedatabase.app',\n  projectId: 'filmoteka-6051d',\n  storageBucket: 'filmoteka-6051d.appspot.com',\n  messagingSenderId: '7192088333',\n  appId: '1:7192088333:web:7a18c384db98030289ea44',\n};\n\nexport default firebaseConfig;\n"],"names":["$6HAUt","parcelRequire","$c992ebec05b07dd5$export$2e2bcd8739ae039","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","$a9oGP","teamModalService","eventListenerCreator","$cecbdd76f2d3d4bd$var$listSectionRef","document","querySelector","$cecbdd76f2d3d4bd$var$inputWatchedRef","$cecbdd76f2d3d4bd$var$inputQueueRef","addEventListener","$cecbdd76f2d3d4bd$var$readFromDataBase","$cecbdd76f2d3d4bd$var$userid","localStorage","getItem","uid","target","app","$6Urw1","initializeApp","database","$6Nu6u","getDatabase","topUserPostsRef","query","ref","onValue","snapshot","data","Object","values","val","innerHTML","$gRtPP","default","setDataToLocalStorage","$cALHK"],"version":3,"file":"library.7d690a96.js.map"}