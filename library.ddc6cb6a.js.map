{"mappings":"oeAEAA,EAAA,S,6CCSAC,EAXuB,CACrBC,OAAQ,0CACRC,WAAY,kCACZC,YACE,yEACFC,UAAW,kBACXC,cAAe,8BACfC,kBAAmB,aACnBC,MAAO,2C,0BDETC,EAAAC,iBAAiBC,uBAEjB,MAAMC,EAAiBC,SAASC,cAAc,wBACxCC,EAAkBF,SAASC,cAAc,YACzCE,EAAgBH,SAASC,cAAc,UAE7CC,EAAgBE,iBAAiB,UAejC,WACEC,EAAiBC,EAAQ,U,IAf3BH,EAAcC,iBAAiB,UAmB/B,WACEC,EAAiBC,EAAQ,Q,IAjBL,IAAlBA,EAASC,aAAaC,QAAQ,OAuBT,SAAhBH,EAAiBI,EAAKC,GAC7B,MAAMC,GAAM,EAAAC,EAAAC,eAAczB,GACpB0B,GAAW,EAAAC,EAAAC,aAAYL,GAEvBM,GAAkB,EAAAF,EAAAG,QAAM,EAAAH,EAAAI,KAAIL,EAAU,SAAWL,EAAM,IAAMC,IACnEU,QAAQC,IAAIJ,IACZ,EAAAF,EAAAO,SAAQL,GAAiBM,IACvB,MAAMC,EAAOC,OAAOC,OAAOH,EAASI,OAEpC5B,EAAe6B,WAAY,EAAAC,EAAAC,SAAgBN,EAAK,G,CA7BhDlB,EACFD,EAAiBC,EAAQ,WAEzBP,EAAe6B,UAAY,wCAc7BR,QAAQW,IAAI7B","sources":["src/library.js","src/js/apps/fireBaseConfig.js"],"sourcesContent":["// import watchedFilms from './js/watchedFilms';\n// import queueFilms from './js/queueFilms';\nimport { writeInDataBase } from './js/apps/dataBaseApi';\nimport { openLoginModal } from './js/modal-of-login';\nimport { teamModalService } from './js/team-modal-service';\nimport { initializeApp } from 'firebase/app';\nimport firebaseConfig from './js/apps/fireBaseConfig';\nimport { getDatabase, ref, set, query, onValue } from 'firebase/database';\nimport oneMovieCardTmp from './templates/oneMovieCard.hbs';\n\nteamModalService.eventListenerCreator();\n\nconst listSectionRef = document.querySelector('.movies-popular-list');\nconst inputWatchedRef = document.querySelector('#watched');\nconst inputQueueRef = document.querySelector('#queue');\n\ninputWatchedRef.addEventListener('change', onWatchedInput);\ninputQueueRef.addEventListener('change', onQueueInput);\n\n// ============ первая загрузка страницы =================================\nlet userid = localStorage.getItem('uid');\n\n// userid = 'E7bAOKLi5uVo2RVCvy4tGxdEo7T2';\nif (userid) {\n  readFromDataBase(userid, 'watched');\n} else {\n  listSectionRef.innerHTML = '<p> В списке пока еще нет фильмов</p>';\n}\n// =========================================================================\n\n// Press Watched button\nfunction onWatchedInput() {\n  readFromDataBase(userid, 'watched');\n}\n\n// Press Queue button\nfunction onQueueInput() {\n  readFromDataBase(userid, 'queue');\n}\n\nconsole.dir(inputWatchedRef);\n\n// Функция чтение из базы данных\nfunction readFromDataBase(uid, target) {\n  const app = initializeApp(firebaseConfig);\n  const database = getDatabase(app);\n\n  const topUserPostsRef = query(ref(database, 'films/' + uid + '/' + target));\n  console.log(topUserPostsRef);\n  onValue(topUserPostsRef, snapshot => {\n    const data = Object.values(snapshot.val());\n\n    listSectionRef.innerHTML = oneMovieCardTmp(data);\n  });\n}\n\n// Открытие модального окна входа и регистрации пользователя\n// openLoginModal();\n","const firebaseConfig = {\n  apiKey: 'AIzaSyD8Xe_Nj5r_CTsQ1IiUWTLdW_hWsbx85Eg',\n  authDomain: 'filmoteka-6051d.firebaseapp.com',\n  databaseURL:\n    'https://filmoteka-6051d-default-rtdb.europe-west1.firebasedatabase.app',\n  projectId: 'filmoteka-6051d',\n  storageBucket: 'filmoteka-6051d.appspot.com',\n  messagingSenderId: '7192088333',\n  appId: '1:7192088333:web:7a18c384db98030289ea44',\n};\n\nexport default firebaseConfig;\n"],"names":["parcelRequire","$348dc88843985a16$export$2e2bcd8739ae039","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","$4CfrK","teamModalService","eventListenerCreator","$ce3726a01b8ab25a$var$listSectionRef","document","querySelector","$ce3726a01b8ab25a$var$inputWatchedRef","$ce3726a01b8ab25a$var$inputQueueRef","addEventListener","$ce3726a01b8ab25a$var$readFromDataBase","$ce3726a01b8ab25a$var$userid","localStorage","getItem","uid","target","app","$25RCP","initializeApp","database","$fQ3Fn","getDatabase","topUserPostsRef","query","ref","console","log","onValue","snapshot","data","Object","values","val","innerHTML","$f8GeO","default","dir"],"version":3,"file":"library.ddc6cb6a.js.map"}